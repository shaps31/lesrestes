{% extends 'base.html.twig' %}

{% block title %}Publier une nouvelle recette - Les Restes{% endblock %}

{% block body %}
<div class="container">
    <!-- Header avec retour -->
    <div class="mb-4">
        <a href="#profil" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Retour à mon profil
        </a>
    </div>
    
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <h2 class="mb-4">Publier une nouvelle recette</h2>
            
            {{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}
            
            <!-- Titre -->
            <div class="mb-3">
                <label for="recette_nom" class="form-label">
                    Titre <span class="text-danger">*</span>
                </label>
                {{ form_widget(form.nom, {'attr': {'class': 'form-control', 'placeholder': 'Omelette anti-gaspi'}}) }}
                {{ form_errors(form.nom) }}
            </div>
            
            <!-- Description -->
            <div class="mb-3">
                <label for="recette_description" class="form-label">
                    Description <span class="text-danger">*</span>
                </label>
                {{ form_widget(form.description, {'attr': {'class': 'form-control', 'rows': 4, 'placeholder': 'Une recette pour utiliser vos restes de légumes...'}}) }}
                {{ form_errors(form.description) }}
            </div>
            
            <!-- Upload image -->
            <div class="mb-3">
                <label class="form-label">Image</label>
                <div class="border rounded p-3 text-center bg-light">
                    <i class="bi bi-camera fs-1 text-muted mb-2"></i>
                    <div class="mb-2">Télécharger une image</div>
                    <small class="text-muted">(Fonctionnalité à venir)</small>
                    {{ form_widget(form.image, {'attr': {'class': 'form-control mt-2', 'style': 'display: none;'}}) }}
                </div>
            </div>
            
            <!-- Temps de préparation -->
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="recette_tempsCuisson" class="form-label">Temps de préparation</label>
                    <div class="input-group">
                        {{ form_widget(form.tempsCuisson, {'attr': {'class': 'form-control', 'value': '15'}}) }}
                        <span class="input-group-text">minutes</span>
                    </div>
                    {{ form_errors(form.tempsCuisson) }}
                </div>
                
                <!-- Nombre de personnes -->
                <div class="col-md-6">
                    <label for="recette_nombrePersonnes" class="form-label">Nombre de personnes</label>
                    {{ form_widget(form.nombrePersonnes, {'attr': {'class': 'form-control', 'value': '4'}}) }}
                    {{ form_errors(form.nombrePersonnes) }}
                </div>
            </div>
            
            <!-- Difficulté -->
            <div class="mb-4">
                <label class="form-label">Difficulté</label>
                <div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="recette[difficulte]" id="facile" value="1" checked>
                        <label class="form-check-label" for="facile">Facile</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="recette[difficulte]" id="moyen" value="2">
                        <label class="form-check-label" for="moyen">Moyen</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="recette[difficulte]" id="difficile" value="3">
                        <label class="form-check-label" for="difficile">Difficile</label>
                    </div>
                </div>
            </div>
            
            <hr class="my-4">
            
            <!-- Ingrédients -->
            <h5 class="mb-3">Ingrédients</h5>
            <div id="ingredients-section" class="mb-3">
                <div class="border rounded p-3">
                    <!-- Ligne ingrédient 1 -->
                    <div class="row mb-2 ingredient-row">
                        <div class="col-md-4">
                            <select class="form-select form-select-sm">
                                <option>Tomate</option>
                                <option>Œuf</option>
                                <option>Oignon</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <input type="number" class="form-control form-control-sm" placeholder="3" value="3">
                        </div>
                        <div class="col-md-3">
                            <select class="form-select form-select-sm">
                                <option>unités</option>
                                <option>kg</option>
                                <option>g</option>
                                <option>ml</option>
                                <option>l</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-outline-danger btn-sm">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Ligne ingrédient 2 -->
                    <div class="row mb-2 ingredient-row">
                        <div class="col-md-4">
                            <select class="form-select form-select-sm">
                                <option>Œuf</option>
                                <option>Tomate</option>
                                <option>Oignon</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <input type="number" class="form-control form-control-sm" placeholder="2" value="2">
                        </div>
                        <div class="col-md-3">
                            <select class="form-select form-select-sm">
                                <option>unités</option>
                                <option>kg</option>
                                <option>g</option>
                                <option>ml</option>
                                <option>l</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-outline-danger btn-sm">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <button type="button" class="btn btn-outline-success btn-sm mt-2">
                    <i class="bi bi-plus"></i> Ajouter un ingrédient
                </button>
            </div>
            
            <hr class="my-4">
            
            <!-- Étapes de préparation -->
            <h5 class="mb-3">Étapes de préparation</h5>
            {{ form_widget(form.etapes, {'attr': {'class': 'form-control', 'rows': 8, 'placeholder': "1. Battre les œufs dans un bol\n2. Couper les tomates en dés\n3. Faire revenir l'oignon...\n4. Ajouter les œufs battus\n5. Servir chaud"}}) }}
            {{ form_errors(form.etapes) }}
            
            <small class="form-text text-muted mb-3 d-block">
                Saisissez chaque étape sur une ligne séparée, numérotée.
            </small>
            
            <!-- Catégorie -->
            <div class="mb-4">
                <label class="form-label">Catégorie</label>
                {{ form_widget(form.categorie, {'attr': {'class': 'form-select'}}) }}
                {{ form_errors(form.categorie) }}
            </div>
            
            <!-- Boutons d'action -->
            <div class="d-flex justify-content-between">
                <a href="{{ path('app_recette_index') }}" class="btn btn-outline-secondary">
                    Annuler
                </a>
                <button type="submit" class="btn btn-success">
                    <i class="bi bi-check-circle"></i> Publier la recette
                </button>
            </div>
            
            {{ form_end(form) }}
        </div>
    </div>
</div>

<script>
// JavaScript pour ajouter/supprimer des ingrédients (simulation)
document.addEventListener('DOMContentLoaded', function() {
    // Simulation du comportement d'ajout d'ingrédients
    console.log('Formulaire de recette chargé - Fonctionnalités dynamiques à implémenter');
});
</script>
{% endblock %}